<!DOCTYPE html>
<html>
  <head>
    <title>Poliedros de Plat√£o</title>
	<meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-physics-system/v4.0.0/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.1.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
    <script> AFRAME.registerComponent('phase-shift', {
      init: function () {
        var el = this.el
        el.addEventListener('gripdown', function () {
           el.setAttribute('collision-filter', {collisionForces: true})
        })
        el.addEventListener('gripup', function () {
           el.setAttribute('collision-filter', {collisionForces: false})
        })
      }
    });
    </script>
  </head>
  <body>
    <a-scene physics shadow="type: pcfsoft" renderer="logarithmicDepthBuffer: true; colorManagement: true;">
        <a-assets>
           <a-mixin id="poli" shadow 
             hoverable grabbable stretchable draggable droppable event-set__hoveron="_event: hover-start;
             material.opacity: 0.7; transparent: true" event-set__hoveroff="_event: hover-end; 
             material.opacity: 1; transparent: false" dynamic-body="linearDamping:0.1; 
             angularDamping:0.8; mass:0.5;"></a-mixin>
           <a-mixin id="piso" geometry="width: 10; height: 0.1; depth: 10;" static-body shadow></a-mixin>
			<a-mixin id="mfisicas" physics-collider phase-shift collision-filter="collisionForces: false" 
			 static-body="shape: sphere; sphereRadius: 0.02" super-hands="colliderEvent: collisions; 
			 colliderEventProperty: els; colliderEndEvent: collisions; colliderEndEventProperty: clearedEls;"></a-mixin>
			 <a-mixin id="pointer" phase-shift raycaster="showLine: true; objects: .cubo, a-box" 
			 collision-filter="collisionForces: false" static-body="shape: sphere; sphereRadius: 0.02" 
			 super-hands="colliderEvent: raycaster-intersection; colliderEventProperty: els;  
			 colliderEndEvent:raycaster-intersection-cleared; colliderEndEventProperty: clearedEls;"></a-mixin>
			<a-mixin id="controle" mixin="pointer" hand-controls="hand: right"></a-mixin>
        </a-assets>
        <a-entity id="cameraRig">
           <a-camera id="head" look-controls wasd-controls-enabled="false" position="0 1.7 0.6" 
             cursor="rayOrigin:mouse" static-body="shape: sphere; sphereRadius: 0.001" 
             super-hands="colliderEvent: raycaster-intersection; colliderEventProperty: els;
             colliderEndEvent:raycaster-intersection-cleared; colliderEndEventProperty: clearedEls;"></a-camera>
           <a-entity id="lhand" mixin="mfisicas" hand-controls="hand: left"></a-entity>
		   <a-entity id="rhand" mixin="controle" hand-controls="hand: right"></a-entity>
        </a-entity>
        <a-box mixin="piso" class="piso" visible="false" position="0 -0.1 0" material="color: rgb(100,180,100)"></a-box>
        <a-gltf-model static-body src="vr/salas/mesa_Platao.glb" position="0 0 0" shadow></a-gltf-model>
        <a-gltf-model class="poli" src="vr/salas/cube.glb" mixin="poli" position="0 0.98 -0.75" scale="0.05 0.05 0.05" shadow></a-gltf-model>
		<a-gltf-model class="poli" src="vr/salas/dodecahedron.glb" mixin="poli" position="-0.75 0.98 -0.25" scale="0.05 0.05 0.05" shadow></a-gltf-model>
        <a-gltf-model class="poli" src="vr/salas/icosahedron.glb" mixin="poli" position="-0.75 0.98 -0.75" scale="0.05 0.05 0.05" shadow></a-gltf-model>
        <a-gltf-model class="poli" src="vr/salas/octahedron.glb" mixin="poli" position="0.16 0.98 -0.25" scale="0.05 0.05 0.05" shadow></a-gltf-model>
        <a-gltf-model class="poli" src="vr/salas/tetrahedron.glb" mixin="poli" position="0.75 0.98 -0.75" scale="0.05 0.05 0.05" shadow></a-gltf-model>
		<a-video src="https://www.youtube.com/watch?v=D0MzHlIAsbQ&list=PLy0I_lGW8HxUG41tIyqLd8vvNxt-5G97s" position="2.07 1 1.16" rotation="0 270 0" depth="0.01" height="1.3" width="2.2"></a-video>
		
        <a-light type="ambient" color="white" intensity="0.5"></a-light>
		<a-light type="directional" color="white" intensity="0.8" position="-3 2 1"></a-light>
		<a-light type="directional" color="white" intensity="0.8" position="3 -2 1"></a-light>
		<a-sky src="vr/salas/toy.jpg"></a-sky>
    </a-scene>
  </body>
</html>